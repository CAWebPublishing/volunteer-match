jQuery(document).ready((function(){$=jQuery.noConflict();var e=$("#volunteer-match");if(e.length){var t,n,a,i,r,l,o,p,c,s,d,u,m,v,h=$('div#volunteer-match input[name="volunteer_match_hidden"]'),g=$('div#volunteer-match input[name="volunteer_match_form_id"]'),_=$('div#volunteer-match input[name="volunteer_match_landing_page"]'),f=$('div#volunteer-match input[name="volunteer_match_link_color"]'),y=$('input[name="volunteer_match_button_size"]'),C=$('input[name="volunteer_match_button_color"]'),E=$('input[name="volunteer_match_button_failed_color"]'),D=$('input[name="volunteer_match_button_font_color"]'),w=$('input[name="volunteer_match_button_failed_text"]'),b=$('input[name="volunteer_match_button_connection_text"]'),k=$('input[name="volunteer_match_button_connection_exist_text"]'),O=$('input[name="volunteer_match_button_text"]'),N=$('input[name="volunteer_match_show_parent_org"]'),x=$('input[name="volunteer_match_show_title"]'),I=$('input[name="volunteer_match_show_location"]'),j=$('input[name="volunteer_match_show_description"]'),P=$('input[name="volunteer_match_description_type"]'),T=$('input[name="volunteer_match_description_expanded_icon"]'),L=$('input[name="volunteer_match_description_collapsed_icon"]'),S=$('input[name="volunteer_match_show_mission"]'),A=$('input[name="volunteer_match_show_notify"]'),V=$('input[name="volunteer_match_show_date"]'),R=$('input[name="volunteer_match_response_page"]'),F=$("div#volunteer-match form"),Q=$("div#volunteer-match #volunteer-match-opps"),z=$("div#volunteer-match #volunteer-match-opp-list"),q=$("div#volunteer-match #volunteer-match-opps .pagination"),M=$("div#volunteer-match #volunteer-match-opps .current-page-view"),U=$('div#volunteer-match input[name="volunteer_match_search_opportunities_nonce"]'),G=$('div#volunteer-match input[name="volunteer_match_location"]'),B=$('div#volunteer-match input[name="volunteer_match_covid19"]'),J=$('div#volunteer-match input[name="volunteer_match_type"][value="local"]'),H=$("button#volunteer-match-search"),K={},W={};if(g.length&&(K=$("#"+g.val()),t=K.find(".firstName input"),n=K.find(".lastName input"),a=K.find(".email input"),i=K.find(".phoneNumber input"),r=K.find(".zip input"),K.find(".acceptTerms input"),l=K.find(".oppID input"),o=K.find(".title input"),p=K.find(".location input"),c=K.find(".specialFlag input"),s=K.find(".parentOrgID input"),d=K.find(".parentName input"),u=K.find(".interests input"),m=K.find(".categories input"),v=K.find(" .container input"),(W=K.find(" .great-for input")).length&&volunteer_match_args.age_groups.length&&W.each((function(e,t){volunteer_match_args.age_groups.forEach((function(e,n){$(t).val()===e.title&&$(t).addClass(e.age_groups)}))}))),K.length)if(h.length&&"true"===h.val()){var X=K.find('button[type="submit"]');$(X).on("click",(function(a){if(K.validate(),K.valid()&&(a.preventDefault(),r.length)){var i=new FormData(K.get(0));i.append("action","wpforms_submit"),jQuery.ajax({type:"POST",dataType:"json",url:volunteer_match_args.ajaxurl,data:i,cache:!1,contentType:!1,processData:!1,success:function(e){A.length&&1==A.val()&&alert(`Thank you, ${t.val()} ${n.val()} for you interest in volunteering.`)}}),K.addClass("hidden"),e.removeClass("hidden"),G.val(r.val()),H.click()}}))}else K.addClass("hidden");function Y(e,h){if(e.preventDefault(),void 0!==h?R.val($(h).attr("href").replace("#","")):R.val(1),F.validate(),K.length&&K.addClass("hidden"),F.valid()){Q.removeClass("hidden"),q.empty(),M.empty(),z.empty(),z.append('Looking for opportunities...<div class="spinner-border text-secondary" role="status"><span class="sr-only">Looking for opportunities</span></div>');var g=new FormData(F.get(0));g.append("action","volunteer_match_return_opportunities"),W.length&&g.append("volunteer_match_great_for",K.find(".great-for input:checked").attr("class")),jQuery.ajax({type:"POST",url:volunteer_match_args.ajaxurl,contentType:!1,processData:!1,data:g,success:function(e){if("string"==typeof e&&e.trim()){var h=JSON.parse(e);if(h.numberOfResults||h.resultsSize)!function(e){var t=document.createElement("NAV"),n=document.createElement("UL"),a=e.currentPage+1,i=a+9,r=i-10,l=Math.ceil(e.resultsSize/100);if(M.html("Viewing Page "+e.currentPage+" of "+l),$(n).addClass("d-flex pagination pagination-sm mb-0 p-0"),a>2){var o=document.createElement("LI"),p=document.createElement("A"),c=a-11?a-11:1;if($(o).addClass("page-item"),$(p).addClass("page-link"),$(p).attr("href","#"+c),$(p).attr("title","Previous 10 Pages"),$(p).html('<span aria-hidden="true">&lsaquo;</span><span class="sr-only">Previous 10 Pages</span>'),p.addEventListener("click",(function(e){Y(e,this)})),$(o).append(p),r>10){var s=document.createElement("LI"),d=document.createElement("A");$(s).addClass("page-item"),$(d).addClass("page-link"),$(d).attr("href","#1"),$(d).attr("title","First 10 Pages"),$(d).html('<span aria-hidden="true">&laquo;</span><span class="sr-only">First 10 Pages</span>'),d.addEventListener("click",(function(e){Y(e,this)})),$(s).append(d),$(n).append(s)}$(n).append(o)}for(var u=a;u<=i&&u<=l;u++){var m=document.createElement("LI"),v=document.createElement("A");$(m).addClass("page-item"),$(v).addClass("page-link"),$(v).attr("href","#"+u),$(v).attr("title","Page "+u),$(v).html(u),v.addEventListener("click",(function(e){Y(e,this)})),$(m).append(v),$(n).append(m)}if(i<l){var h=document.createElement("LI"),g=document.createElement("A");if($(h).addClass("page-item"),$(g).addClass("page-link"),$(g).attr("href","#"+(l-10)),$(g).attr("title","Last 10 Pages"),$(g).html('<span aria-hidden="true">&raquo;</span><span class="sr-only">Last 10 Pages</span>'),g.addEventListener("click",(function(e){Y(e,this)})),$(h).append(g),i+1<l-10){var _=document.createElement("LI"),f=document.createElement("A");$(_).addClass("page-item"),$(f).addClass("page-link"),$(f).attr("href","#"+(i+1)),$(f).attr("title","Next 10 Pages"),$(f).html('<span aria-hidden="true">&rsaquo;</span><span class="sr-only">Next 10 Pages</span>'),f.addEventListener("click",(function(e){Y(e,this)})),$(_).append(f),$(n).append(_)}$(n).append(h)}$(t).append(n),l>1&&q.append(t)}(h),z.empty(),h.opportunities.forEach((function(e){!function(e){var h=document.createElement("LI"),g=document.createElement("DIV"),A=document.createElement("DIV"),R=document.createElement("DIV"),F=document.createElement("BUTTON");$(h).addClass("opp-match-item-"+e.id),$(g).addClass("row mb-2"),$(A).addClass("col-10"),$(R).addClass("col-2"),$(F).addClass("float-right btn btn-primary opp-match-sign-up"),y.length?$(F).addClass(y.val()):$(F).addClass("btn-md");$(F).html(O.val()),$(F).attr("id","sign-up-"+e.id),C.length&&$(F).css("background-color",C.val());D.length&&$(F).css("color",D.val());if(F.addEventListener("click",(function(){!function(e,h){if(e.prepend('<div class="spinner-border-sm spinner-border mr-2" role="status"><span class="sr-only">Signing up...</span></div>'),K.length){var g=new FormData;g.append("action","volunteer_match_create_connection"),g.append("firstName",t.val()),g.append("lastName",n.val()),g.append("email",a.val()),g.append("phoneNumber",i.val()),g.append("zip",r.val()),g.append("oppId",h.id),g.append("volunteer_match_search_opportunities_nonce",U.val()),jQuery.ajax({type:"POST",url:volunteer_match_args.ajaxurl,data:g,cache:!1,contentType:!1,processData:!1,success:function(t){if(void 0===t.error){e.html(b.val()),function(e){l.length&&l.val(e.id);o.length&&o.val(e.title);c.length&&c.val(B.prop("checked"));void 0!==e.parentOrg&&(s.length&&s.val(e.parentOrg.id),d.length&&d.val(e.parentOrg.name));if(p.length){var t=`${e.location.street1},${e.location.city},${e.location.region},${e.location.postalCode}`;p.val(t)}r.length&&r.val(G.val());var n=$('input[name="volunteer_match_interests[]"]:checked');if(n.length){var a="",i="";$.each(n.slice(1),(function(e,t){a+=","+t.title,i+=","+t.value})),u.length&&u.val($(n[0]).html()+a),m.length&&m.val($(n[0]).val()+i)}v.length&&v.val(e.container)}(h);var n=new FormData(K.get(0));n.append("action","wpforms_submit"),jQuery.ajax({type:"POST",dataType:"json",url:volunteer_match_args.ajaxurl,data:n,cache:!1,contentType:!1,processData:!1,success:function(e){alert(`Thank you for you interest in ${h.title}.`)}})}else{var a=void 0!==t.response?t.response:"";400===t.error_code?(alert(a),e.html(k.val())):(alert(`An error occurred while signing up for ${h.title}, please try again later. Error Message: ${a}`),e.html(w.val()),e.removeClass("btn-primary"),e.addClass("btn-secondary"),E.length&&e.css("background-color",E.val()))}}})}}($(this),e)})),$(R).append(F),!N.length&&void 0!==e.parentOrg){var Q=document.createElement("STRONG");$(Q).html("Organization: "+e.parentOrg.name),$(Q).addClass("d-block opp-match-parent-org-name"),$(A).append(Q)}if(!S.length&&void 0!==e.parentOrg){var q=document.createElement("DIV"),M=(Q=document.createElement("STRONG"),document.createElement("DIV"));$(q).addClass("opp-match-parent-org-mission"),$(Q).html("Mission:"),$(M).html(""+e.parentOrg.mission),$(q).append(Q),$(q).append(M),$(A).append(q)}if(!x.length){var H,W=document.createElement("DIV"),X=document.createElement("STRONG");if($(W).addClass("opp-match-title"),$(X).html("Opportunity: "),_.length){H=document.createElement("A");var Y="?volunteer_opp_id="+e.id,Z=$('input[name="volunteer_match_interests[]"]:checked'),ee="",te="";Z.length&&$.each(Z.slice(1),(function(e,t){ee+=","+t.title,te+=","+t.value})),K.length&&(Y+="&firstName="+t.val()+"&lastName="+n.val()+"&email="+a.val()+"&phoneNumber="+i.val()+"&zip="+r.val()+"&oppID="+e.id+"&title="+e.title+`&location=${e.location.street1},${e.location.city},${e.location.region},${e.location.postalCode}&specialFlag=`+B.prop("checked")+"&parentOrgID="+e.parentOrg.id+"&parentName="+e.parentOrg.name+"&interests="+ee+"&categories="+te+"&container="+e.container),$(H).attr("href",_.val()+Y)}else H=document.createElement("SPAN");$(H).html(""+e.title),$(W).append(X),$(W).append(H),$(A).append(W)}if(!V.length&&void 0!==e.dateRange){var ne=document.createElement("DIV");$(ne).addClass("opp-match-dates"),$(ne).append(function(e){if(e.dateRange.ongoing)return"<strong>Dates: </strong><span>Ongoing</span>";var t=null!==e.dateRange.startDate?""+e.dateRange.startDate:"",n=null!==e.dateRange.endDate?""+e.dateRange.endDate:"",a={month:"long",day:"numeric",year:"numeric"};return t.trim()&&null!==e.dateRange.startDate&&(t=" "+(t=new Date(t).toLocaleDateString("en-US",a))),n.trim()&&null!==e.dateRange.endDate&&(n=" "+(n=new Date(n).toLocaleDateString("en-US",a))),t.trim()&&n.trim()&&(t+=" -"),`<strong>Dates:</strong><span>${t}${n}</span>`}(e)),$(A).append(ne)}if(J.prop("checked")&&!I.length){var ae=document.createElement("DIV");$(ae).addClass("opp-match-location"),$(ae).append(function(e){var t=document.createElement("SPAN"),n=document.createElement("A"),a=`${e.location.street1},${e.location.city},${e.location.region},${e.location.postalCode}`;$(t).addClass("dashicons dashicons-location"),$(n).attr("href","https://www.google.com/maps/place/"+a),$(n).attr("target","_blank"),f.length&&$(n).css("color",f.val());return $(n).html(a),$(n).prepend(t),n}(e)),$(A).append(ae)}if(!j.length){var ie=document.createElement("DIV");$(ie).addClass("opp-match-description"),$(ie).append(function(e){var t=document.createElement("DIV"),n=document.createElement("A"),a=document.createElement("SPAN"),i=document.createElement("DIV");$(i).attr("id","#opp-description-"+e.id),$(i).addClass("collapse"),"plaintext"===P.val()?$(i).html(e.plaintextDescription):$(i).html(e.description);return $(i).collapse({toggle:!1}),$(n).addClass("text-reset"),$(n).attr("data-toggle","collapse"),$(n).attr("href","#opp-description-"+e.id),$(n).attr("aria-expanded","false"),$(n).attr("aria-controls","opp-description-"+e.id),$(n).html("Description"),$(a).addClass("dashicons align-middle dashicons-"+T.val()+" dashicons-"+L.val()),$(n).append(a),$(t).append(n),$(t).append(i),n.addEventListener("click",(function(e){$(i).collapse("toggle"),$(a).toggleClass("dashicons-"+L.val())})),t}(e)),$(A).append(ie)}$(g).append(A),$(g).append(R),$(h).append(g),z.append(h)}(e)}));else if(e.error){var g=void 0!==conn.response?" Error Message: "+conn.response:"";z.html(g)}else z.html("<span>No Opportunities Available.</span>")}else z.html("<span>An error occurred while retrieving opportunities.</span>")}})}else $("div#volunteer-match form input:invalid").parent().addClass("was-validated")}G.keypress((function(e){if(F.find(".was-validated").removeClass("was-validated"),8!=e.which&&0!=e.which&&(e.which<48||e.which>57))return!1})),H.click((function(e){Y(e,void 0)}))}})),jQuery(document).ready((function(){$=jQuery.noConflict();var e=$("#volunteer-match-opportunity");if(e.length){var t,n,a,i,r,l,o,p,c,s,d=e.attr("data-target"),u=$('input[name="volunteer_match_opp_show_notify"]'),m={},v={};if(d.length&&(m=$("#"+d),n=m.find(".firstName input"),a=m.find(".lastName input"),t=m.find(".zip input"),i=m.find(".oppID input"),r=m.find(".title input"),l=m.find(".location input"),o=m.find(".specialFlag input"),p=m.find(".parentOrgID input"),c=m.find(".parentName input"),s=m.find(".interests input"),v=m.find(".categories input"),container=m.find(" .container input"),function(){var t=e.find('input[name="volunteer_match_opp_id"]'),n=e.find('input[name="volunteer_match_opp_title"]'),a=e.find('input[name="volunteer_match_opp_is_covid"]'),d=e.find('input[name="volunteer_match_opp_parent_org_id"]'),u=e.find('input[name="volunteer_match_opp_parent_org_name"]'),m=e.find('input[name="volunteer_match_opp_location"]'),h=e.find('input[name="volunteer_match_opp_container"]'),g=e.find('input[name="volunteer_match_opp_categories"]'),$=e.find('input[name="volunteer_match_opp_interests"]');i.length&&i.val(t.val());r.length&&r.val(n.val());o.length&&o.val(a.val());p.length&&p.val(d.val());c.length&&c.val(u.val());l.length&&l.val(m.val());s.length&&s.val($.val());v.length&&v.val(g.val());container.length&&container.val(h.val())}()),m.length){var h=m.find('button[type="submit"]');$(h).on("click",(function(e){if(m.validate(),m.valid()&&(e.preventDefault(),t.length)){var i=new FormData(m.get(0));i.append("action","wpforms_submit"),jQuery.ajax({type:"POST",dataType:"json",url:volunteer_match_args.ajaxurl,data:i,cache:!1,contentType:!1,processData:!1,success:function(e){if(u.length&&"true"==u.val()){var t=n.length?n.val():"",i=a.length?a.val():"",r=t.length&&i.length?`${n.val()} ${a.val()}`:`${n.val()}${a.val()}`;r=r.length?`, ${r} `:" ",alert(`Thank you${r}for you interest in volunteering.`)}m.addClass("hidden")}})}})),t.keypress((function(e){if(volunteer_match_form.find(".was-validated").removeClass("was-validated"),8!=e.which&&0!=e.which&&(e.which<48||e.which>57))return!1}))}}}));