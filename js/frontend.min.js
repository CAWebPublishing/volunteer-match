jQuery(document).ready((function(){$=jQuery.noConflict();var e=$("#volunteer-match");if(e.length){var t,a,n,r,i,o,l,s,c,p,d,u,m=$('div#volunteer-match input[name="volunteer_match_hidden"]'),v=$('div#volunteer-match input[name="volunteer_match_form_id"]'),h=$('div#volunteer-match input[name="volunteer_match_landing_page"]'),g=$('div#volunteer-match input[name="volunteer_match_link_color"]'),_=$('input[name="volunteer_match_button_size"]'),f=$('input[name="volunteer_match_button_color"]'),y=$('input[name="volunteer_match_button_failed_color"]'),E=$('input[name="volunteer_match_button_font_color"]'),C=$('input[name="volunteer_match_button_failed_text"]'),D=$('input[name="volunteer_match_button_connection_text"]'),b=$('input[name="volunteer_match_button_connection_exist_text"]'),k=$('input[name="volunteer_match_button_text"]'),w=$('input[name="volunteer_match_show_parent_org"]'),O=$('input[name="volunteer_match_show_title"]'),N=$('input[name="volunteer_match_show_location"]'),x=$('input[name="volunteer_match_show_description"]'),I=$('input[name="volunteer_match_description_type"]'),P=$('input[name="volunteer_match_description_expanded_icon"]'),L=$('input[name="volunteer_match_description_collapsed_icon"]'),S=$('input[name="volunteer_match_show_mission"]'),T=$('input[name="volunteer_match_show_notify"]'),j=$('input[name="volunteer_match_show_date"]'),A=$('input[name="volunteer_match_response_page"]'),V=$("div#volunteer-match form"),R=$("div#volunteer-match #volunteer-match-opps"),F=$("div#volunteer-match #volunteer-match-opp-list"),z=$("div#volunteer-match #volunteer-match-opps .pagination"),Q=$("div#volunteer-match #volunteer-match-opps .current-page-view"),q=$('div#volunteer-match input[name="volunteer_match_search_opportunities_nonce"]'),M=$('div#volunteer-match input[name="volunteer_match_location"]'),U=$('div#volunteer-match input[name="volunteer_match_covid19"]'),G=$('div#volunteer-match input[name="volunteer_match_type"][value="local"]'),B=$("button#volunteer-match-search"),J={},H={};if(v.length&&(J=$("#"+v.val()),t=J.find(".firstName input"),a=J.find(".lastName input"),n=J.find(".email input"),r=J.find(".phoneNumber input"),i=J.find(".zip input"),J.find(".acceptTerms input"),o=J.find(".oppID input"),l=J.find(".title input"),s=J.find(".location input"),c=J.find(".specialFlag input"),p=J.find(".parentOrgID input"),d=J.find(".parentName input"),u=J.find(".interests input"),H=J.find(".categories input"),container=J.find(" .container input")),J.length)if(m.length&&"true"===m.val()){var K=J.find('button[type="submit"]');$(K).on("click",(function(n){if(J.validate(),J.valid()&&(n.preventDefault(),i.length)){var r=new FormData(J.get(0));r.append("action","wpforms_submit"),jQuery.ajax({type:"POST",dataType:"json",url:volunteer_match_args.ajaxurl,data:r,cache:!1,contentType:!1,processData:!1,success:function(e){T.length&&1==T.val()&&alert(`Thank you, ${t.val()} ${a.val()} for you interest in volunteering.`)}}),J.addClass("hidden"),e.removeClass("hidden"),M.val(i.val()),B.click()}}))}else J.addClass("hidden");function W(e,m){if(e.preventDefault(),void 0!==m?A.val($(m).attr("href").replace("#","")):A.val(1),V.validate(),J.length&&J.addClass("hidden"),V.valid()){R.removeClass("hidden"),z.empty(),Q.empty(),F.empty(),F.append('Looking for opportunities...<div class="spinner-border text-secondary" role="status"><span class="sr-only">Looking for opportunities</span></div>');var v=new FormData(V.get(0));v.append("action","volunteer_match_return_opportunities"),jQuery.ajax({type:"POST",url:volunteer_match_args.ajaxurl,contentType:!1,processData:!1,data:v,success:function(e){if("string"==typeof e&&e.trim()){var m=JSON.parse(e);if(m.numberOfResults||m.resultsSize)!function(e){var t=document.createElement("NAV"),a=document.createElement("UL"),n=e.currentPage+1,r=n+9,i=r-10,o=Math.ceil(e.resultsSize/100);if(Q.html("Viewing Page "+e.currentPage+" of "+o),$(a).addClass("d-flex pagination pagination-sm mb-0 p-0"),n>2){var l=document.createElement("LI"),s=document.createElement("A"),c=n-11?n-11:1;if($(l).addClass("page-item"),$(s).addClass("page-link"),$(s).attr("href","#"+c),$(s).attr("title","Previous 10 Pages"),$(s).html('<span aria-hidden="true">&lsaquo;</span><span class="sr-only">Previous 10 Pages</span>'),s.addEventListener("click",(function(e){W(e,this)})),$(l).append(s),i>10){var p=document.createElement("LI"),d=document.createElement("A");$(p).addClass("page-item"),$(d).addClass("page-link"),$(d).attr("href","#1"),$(d).attr("title","First 10 Pages"),$(d).html('<span aria-hidden="true">&laquo;</span><span class="sr-only">First 10 Pages</span>'),d.addEventListener("click",(function(e){W(e,this)})),$(p).append(d),$(a).append(p)}$(a).append(l)}for(var u=n;u<=r&&u<=o;u++){var m=document.createElement("LI"),v=document.createElement("A");$(m).addClass("page-item"),$(v).addClass("page-link"),$(v).attr("href","#"+u),$(v).attr("title","Page "+u),$(v).html(u),v.addEventListener("click",(function(e){W(e,this)})),$(m).append(v),$(a).append(m)}if(r<o){var h=document.createElement("LI"),g=document.createElement("A");if($(h).addClass("page-item"),$(g).addClass("page-link"),$(g).attr("href","#"+(o-10)),$(g).attr("title","Last 10 Pages"),$(g).html('<span aria-hidden="true">&raquo;</span><span class="sr-only">Last 10 Pages</span>'),g.addEventListener("click",(function(e){W(e,this)})),$(h).append(g),r+1<o-10){var _=document.createElement("LI"),f=document.createElement("A");$(_).addClass("page-item"),$(f).addClass("page-link"),$(f).attr("href","#"+(r+1)),$(f).attr("title","Next 10 Pages"),$(f).html('<span aria-hidden="true">&rsaquo;</span><span class="sr-only">Next 10 Pages</span>'),f.addEventListener("click",(function(e){W(e,this)})),$(_).append(f),$(a).append(_)}$(a).append(h)}$(t).append(a),o>1&&z.append(t)}(m),F.empty(),m.opportunities.forEach((function(e){!function(e){var m=document.createElement("LI"),v=document.createElement("DIV"),T=document.createElement("DIV"),A=document.createElement("DIV"),V=document.createElement("BUTTON");$(m).addClass("opp-match-item-"+e.id),$(v).addClass("row mb-2"),$(T).addClass("col-10"),$(A).addClass("col-2"),$(V).addClass("float-right btn btn-primary opp-match-sign-up"),_.length?$(V).addClass(_.val()):$(V).addClass("btn-md");$(V).html(k.val()),$(V).attr("id","sign-up-"+e.id),f.length&&$(V).css("background-color",f.val());E.length&&$(V).css("color",E.val());if(V.addEventListener("click",(function(){!function(e,m){if(e.prepend('<div class="spinner-border-sm spinner-border mr-2" role="status"><span class="sr-only">Signing up...</span></div>'),J.length){var v=new FormData;v.append("action","volunteer_match_create_connection"),v.append("firstName",t.val()),v.append("lastName",a.val()),v.append("email",n.val()),v.append("phoneNumber",r.val()),v.append("zip",i.val()),v.append("oppId",m.id),v.append("volunteer_match_search_opportunities_nonce",q.val()),jQuery.ajax({type:"POST",url:volunteer_match_args.ajaxurl,data:v,cache:!1,contentType:!1,processData:!1,success:function(t){if(void 0===t.error){e.html(D.val()),function(e){o.length&&o.val(e.id);l.length&&l.val(e.title);c.length&&c.val(U.prop("checked"));void 0!==e.parentOrg&&(p.length&&p.val(e.parentOrg.id),d.length&&d.val(e.parentOrg.name));if(s.length){var t=`${e.location.street1},${e.location.city},${e.location.region},${e.location.postalCode}`;s.val(t)}i.length&&i.val(M.val());var a=$('input[name="volunteer_match_interests[]"]:checked');if(a.length){var n="",r="";$.each(a.slice(1),(function(e,t){n+=","+t.title,r+=","+t.value})),u.length&&u.val($(a[0]).html()+n),H.length&&H.val($(a[0]).val()+r)}container.length&&container.val(e.container)}(m);var a=new FormData(J.get(0));a.append("action","wpforms_submit"),jQuery.ajax({type:"POST",dataType:"json",url:volunteer_match_args.ajaxurl,data:a,cache:!1,contentType:!1,processData:!1,success:function(e){alert(`Thank you for you interest in ${m.title}.`)}})}else{var n=void 0!==t.response?t.response:"";400===t.error_code?(alert(n),e.html(b.val())):(alert(`An error occurred while signing up for ${m.title}, please try again later. Error Message: ${n}`),e.html(C.val()),e.removeClass("btn-primary"),e.addClass("btn-secondary"),y.length&&e.css("background-color",y.val()))}}})}}($(this),e)})),$(A).append(V),!w.length&&void 0!==e.parentOrg){var R=document.createElement("STRONG");$(R).html("Organization: "+e.parentOrg.name),$(R).addClass("d-block opp-match-parent-org-name"),$(T).append(R)}if(!S.length&&void 0!==e.parentOrg){var z=document.createElement("DIV"),Q=(R=document.createElement("STRONG"),document.createElement("DIV"));$(z).addClass("opp-match-parent-org-mission"),$(R).html("Mission:"),$(Q).html(""+e.parentOrg.mission),$(z).append(R),$(z).append(Q),$(T).append(z)}if(!O.length){var B,K=document.createElement("DIV"),W=document.createElement("STRONG");if($(K).addClass("opp-match-title"),$(W).html("Opportunity: "),h.length){B=document.createElement("A");var X="?volunteer_opp_id="+e.id,Y=$('input[name="volunteer_match_interests[]"]:checked'),Z="",ee="";Y.length&&$.each(Y.slice(1),(function(e,t){Z+=","+t.title,ee+=","+t.value})),J.length&&(X+="&firstName="+t.val()+"&lastName="+a.val()+"&email="+n.val()+"&phoneNumber="+r.val()+"&zip="+i.val()+"&oppID="+e.id+"&title="+e.title+`&location=${e.location.street1},${e.location.city},${e.location.region},${e.location.postalCode}&specialFlag=`+U.prop("checked")+"&parentOrgID="+e.parentOrg.id+"&parentName="+e.parentOrg.name+"&interests="+Z+"&categories="+ee+"&container="+e.container),$(B).attr("href",h.val()+X)}else B=document.createElement("SPAN");$(B).html(""+e.title),$(K).append(W),$(K).append(B),$(T).append(K)}if(!j.length&&void 0!==e.dateRange){var te=document.createElement("DIV");$(te).addClass("opp-match-dates"),$(te).append(function(e){if(e.dateRange.ongoing)return"<strong>Dates: </strong><span>Ongoing</span>";var t=null!==e.dateRange.startDate?""+e.dateRange.startDate:"",a=null!==e.dateRange.endDate?""+e.dateRange.endDate:"",n={month:"long",day:"numeric",year:"numeric"};return t.trim()&&null!==e.dateRange.startDate&&(t=" "+(t=new Date(t).toLocaleDateString("en-US",n))),a.trim()&&null!==e.dateRange.endDate&&(a=" "+(a=new Date(a).toLocaleDateString("en-US",n))),t.trim()&&a.trim()&&(t+=" -"),`<strong>Dates:</strong><span>${t}${a}</span>`}(e)),$(T).append(te)}if(G.prop("checked")&&!N.length){var ae=document.createElement("DIV");$(ae).addClass("opp-match-location"),$(ae).append(function(e){var t=document.createElement("SPAN"),a=document.createElement("A"),n=`${e.location.street1},${e.location.city},${e.location.region},${e.location.postalCode}`;$(t).addClass("dashicons dashicons-location"),$(a).attr("href","https://www.google.com/maps/place/"+n),$(a).attr("target","_blank"),g.length&&$(a).css("color",g.val());return $(a).html(n),$(a).prepend(t),a}(e)),$(T).append(ae)}if(!x.length){var ne=document.createElement("DIV");$(ne).addClass("opp-match-description"),$(ne).append(function(e){var t=document.createElement("DIV"),a=document.createElement("A"),n=document.createElement("SPAN"),r=document.createElement("DIV");$(r).attr("id","#opp-description-"+e.id),$(r).addClass("collapse"),"plaintext"===I.val()?$(r).html(e.plaintextDescription):$(r).html(e.description);return $(r).collapse({toggle:!1}),$(a).addClass("text-reset"),$(a).attr("data-toggle","collapse"),$(a).attr("href","#opp-description-"+e.id),$(a).attr("aria-expanded","false"),$(a).attr("aria-controls","opp-description-"+e.id),$(a).html("Description"),$(n).addClass("dashicons align-middle dashicons-"+P.val()+" dashicons-"+L.val()),$(a).append(n),$(t).append(a),$(t).append(r),a.addEventListener("click",(function(e){$(r).collapse("toggle"),$(n).toggleClass("dashicons-"+L.val())})),t}(e)),$(T).append(ne)}$(v).append(T),$(v).append(A),$(m).append(v),F.append(m)}(e)}));else if(e.error){var v=void 0!==conn.response?" Error Message: "+conn.response:"";F.html(v)}else F.html("<span>No Opportunities Available.</span>")}else F.html("<span>An error occurred while retrieving opportunities.</span>")}})}else $("div#volunteer-match form input:invalid").parent().addClass("was-validated")}M.keypress((function(e){if(V.find(".was-validated").removeClass("was-validated"),8!=e.which&&0!=e.which&&(e.which<48||e.which>57))return!1})),B.click((function(e){W(e,void 0)}))}}));