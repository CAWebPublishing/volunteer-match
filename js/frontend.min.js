jQuery(document).ready((function(){$=jQuery.noConflict();var e=$("#volunteer-match");if(e.length){var t,a,n,r,o,i,l,s,p,d,c,u,m=$('div#volunteer-match input[name="volunteer_match_hidden"]'),h=$('div#volunteer-match input[name="volunteer_match_form_id"]'),v=$('div#volunteer-match input[name="volunteer_match_link_color"]'),g=$('input[name="volunteer_match_button_size"]'),f=$('input[name="volunteer_match_button_color"]'),_=$('input[name="volunteer_match_button_failed_color"]'),y=$('input[name="volunteer_match_button_font_color"]'),E=$('input[name="volunteer_match_show_parent_org"]'),C=$('input[name="volunteer_match_show_title"]'),D=$('input[name="volunteer_match_show_location"]'),w=$('input[name="volunteer_match_show_description"]'),k=$('input[name="volunteer_match_show_mission"]'),b=$('input[name="volunteer_match_show_notify"]'),O=$('input[name="volunteer_match_show_date"]'),P=$('input[name="volunteer_match_response_page"]'),I=$("div#volunteer-match form"),L=$("div#volunteer-match #volunteer-match-opps"),N=$("div#volunteer-match #volunteer-match-opp-list"),S=$("div#volunteer-match #volunteer-match-opps .pagination"),T=$("div#volunteer-match #volunteer-match-opps .current-page-view"),j=$('div#volunteer-match input[name="volunteer_match_search_opportunities_nonce"]'),x=$('div#volunteer-match input[name="volunteer_match_location"]'),A=$('div#volunteer-match input[name="volunteer_match_covid19"]'),V=$('div#volunteer-match input[name="volunteer_match_type"][value="local"]'),R=$("button#volunteer-match-search"),F={},Q={};if(h.length&&(F=$("#"+h.val()),t=F.find(".firstName input"),a=F.find(".lastName input"),n=F.find(".email input"),r=F.find(".phoneNumber input"),o=F.find(".zip input"),F.find(".acceptTerms input"),i=F.find(".oppID input"),l=F.find(".title input"),s=F.find(".location input"),p=F.find(".specialFlag input"),d=F.find(".parentOrgID input"),c=F.find(".parentName input"),u=F.find(".interests input"),Q=F.find(".categories input")),F.length)if(m.length&&"true"===m.val()){var z=F.find('button[type="submit"]');$(z).on("click",(function(n){if(F.validate(),F.valid()&&(n.preventDefault(),o.length)){var r=new FormData(F.get(0));r.append("action","wpforms_submit"),jQuery.ajax({type:"POST",dataType:"json",url:volunteer_match_args.ajaxurl,data:r,cache:!1,contentType:!1,processData:!1,success:function(e){b.length&&1==b.val()&&alert(`Thank you, ${t.val()} ${a.val()} for you interest in volunteering.`)}}),F.addClass("hidden"),e.removeClass("hidden"),x.val(o.val()),R.click()}}))}else F.addClass("hidden");function U(e,m){if(e.preventDefault(),void 0!==m?P.val($(m).attr("href").replace("#","")):P.val(1),I.validate(),F.length&&F.addClass("hidden"),I.valid()){L.removeClass("hidden"),S.empty(),T.empty(),N.empty(),N.append('Looking for opportunities...<div class="spinner-border text-secondary" role="status"><span class="sr-only">Looking for opportunities</span></div>');var h=new FormData(I.get(0));h.append("action","volunteer_match_return_opportunities"),jQuery.ajax({type:"POST",url:volunteer_match_args.ajaxurl,contentType:!1,processData:!1,data:h,success:function(e){if("string"==typeof e&&e.trim()){var m=JSON.parse(e);if(m.numberOfResults)!function(e){var t=document.createElement("NAV"),a=document.createElement("UL"),n=e.currentPage+1,r=n+9,o=r-10,i=Math.ceil(e.resultsSize/100);if(T.html("Viewing Page "+e.currentPage+" of "+i),$(a).addClass("d-flex pagination pagination-sm mb-0"),n>2){var l=document.createElement("LI"),s=document.createElement("A"),p=n-11?n-11:1;if($(l).addClass("page-item"),$(s).addClass("page-link"),$(s).attr("href","#"+p),$(s).attr("title","Previous 10 Pages"),$(s).html('<span aria-hidden="true">&lsaquo;</span><span class="sr-only">Previous 10 Pages</span>'),s.addEventListener("click",(function(e){U(e,this)})),$(l).append(s),o>10){var d=document.createElement("LI"),c=document.createElement("A");$(d).addClass("page-item"),$(c).addClass("page-link"),$(c).attr("href","#1"),$(c).attr("title","First 10 Pages"),$(c).html('<span aria-hidden="true">&laquo;</span><span class="sr-only">First 10 Pages</span>'),c.addEventListener("click",(function(e){U(e,this)})),$(d).append(c),$(a).append(d)}$(a).append(l)}for(var u=n;u<=r&&u<=i;u++){var m=document.createElement("LI"),h=document.createElement("A");$(m).addClass("page-item"),$(h).addClass("page-link"),$(h).attr("href","#"+u),$(h).attr("title","Page "+u),$(h).html(u),h.addEventListener("click",(function(e){U(e,this)})),$(m).append(h),$(a).append(m)}if(r<i){var v=document.createElement("LI"),g=document.createElement("A");if($(v).addClass("page-item"),$(g).addClass("page-link"),$(g).attr("href","#"+(i-10)),$(g).attr("title","Last 10 Pages"),$(g).html('<span aria-hidden="true">&raquo;</span><span class="sr-only">Last 10 Pages</span>'),g.addEventListener("click",(function(e){U(e,this)})),$(v).append(g),r+1<i-10){var f=document.createElement("LI"),_=document.createElement("A");$(f).addClass("page-item"),$(_).addClass("page-link"),$(_).attr("href","#"+(r+1)),$(_).attr("title","Next 10 Pages"),$(_).html('<span aria-hidden="true">&rsaquo;</span><span class="sr-only">Next 10 Pages</span>'),_.addEventListener("click",(function(e){U(e,this)})),$(f).append(_),$(a).append(f)}$(a).append(v)}$(t).append(a),S.append(t)}(m),N.empty(),m.opportunities.forEach((function(e){!function(e){var m=document.createElement("LI"),h=document.createElement("DIV"),b=document.createElement("DIV"),P=document.createElement("DIV"),I=document.createElement("BUTTON");$(m).addClass("opp-match-item-"+e.id),$(h).addClass("row mb-2"),$(b).addClass("col-10"),$(P).addClass("col-2"),$(I).addClass("float-right btn btn-primary opp-match-sign-up"),g.length?$(I).addClass(g.val()):$(I).addClass("btn-md");$(I).html("Sign Up"),$(I).attr("id","sign-up-"+e.id),f.length&&$(I).css("background-color",f.val());y.length&&$(I).css("color",y.val());if(I.addEventListener("click",(function(){!function(e,m){if(e.prepend('<div class="spinner-border-sm spinner-border mr-2" role="status"><span class="sr-only">Signing up...</span></div>'),F.length){var h=new FormData;h.append("action","volunteer_match_create_connection"),h.append("firstName",t.val()),h.append("lastName",a.val()),h.append("email",n.val()),h.append("phoneNumber",r.val()),h.append("zip",o.val()),h.append("oppId",m.id),h.append("volunteer_match_search_opportunities_nonce",j.val()),jQuery.ajax({type:"POST",url:volunteer_match_args.ajaxurl,data:h,cache:!1,contentType:!1,processData:!1,success:function(t){if(void 0===t.error){e.html("Connected"),function(e){i.length&&i.val(e.id);l.length&&l.val(e.title);p.length&&p.val(A.prop("checked"));void 0!==e.parentOrg&&(d.length&&d.val(e.parentOrg.id),c.length&&c.val(e.parentOrg.name));if(s.length){var t=`${e.location.street1},${e.location.city},${e.location.region},${e.location.postalCode}`;s.val(t)}o.length&&o.val(x.val());var a=$('input[name="volunteer_match_interests[]"]:checked');if(a.length){var n="",r="";$.each(a.slice(1),(function(e,t){n+=","+t.title,r+=","+t.value})),u.length&&u.val($(a[0]).html()+n),Q.length&&Q.val($(a[0]).val()+r)}}(m);var a=new FormData(F.get(0));a.append("action","wpforms_submit"),jQuery.ajax({type:"POST",dataType:"json",url:volunteer_match_args.ajaxurl,data:a,cache:!1,contentType:!1,processData:!1,success:function(e){alert(`Thank you for you interest in ${m.title}.`)}})}else{var n=void 0!==t.response?" Error Message: "+t.response:"";alert(`An error occurred while signing up for ${m.title}, please try again later.${n}`),e.html("Failed"),e.removeClass("btn-primary"),e.addClass("btn-secondary"),_.length&&e.css("background-color",_.val())}}})}}($(this),e)})),$(P).append(I),!E.length&&void 0!==e.parentOrg){var L=document.createElement("STRONG");$(L).html("Organization: "+e.parentOrg.name),$(L).addClass("d-block opp-match-parent-org-name"),$(b).append(L)}if(!k.length&&void 0!==e.parentOrg){var S=document.createElement("DIV"),T=(L=document.createElement("STRONG"),document.createElement("DIV"));$(S).addClass("opp-match-parent-org-mission"),$(L).html("Mission:"),$(T).html(""+e.parentOrg.mission),$(S).append(L),$(S).append(T),$(b).append(S)}if(!C.length){var R=document.createElement("DIV"),z=document.createElement("STRONG"),U=document.createElement("SPAN");$(R).addClass("opp-match-title"),$(z).html("Opportunity: "),$(U).html(""+e.title),$(R).append(z),$(R).append(U),$(b).append(R)}if(!O.length&&void 0!==e.dateRange){var q=document.createElement("DIV");$(q).addClass("opp-match-dates"),$(q).append(function(e){if(e.dateRange.ongoing)return"<strong>Dates: </strong><span>Ongoing</span>";var t=null!==e.dateRange.startDate?""+e.dateRange.startDate:"",a=null!==e.dateRange.endDate?""+e.dateRange.endDate:"",n={month:"long",day:"numeric",year:"numeric"};return t.trim()&&null!==e.dateRange.startDate&&(t=" "+(t=new Date(t).toLocaleDateString("en-US",n))),a.trim()&&null!==e.dateRange.endDate&&(a=" "+(a=new Date(a).toLocaleDateString("en-US",n))),t.trim()&&a.trim()&&(t+=" -"),`<strong>Dates:</strong><span>${t}${a}</span>`}(e)),$(b).append(q)}if(V.prop("checked")&&!D.length){var M=document.createElement("DIV");$(M).addClass("opp-match-location"),$(M).append(function(e){var t=document.createElement("SPAN"),a=document.createElement("A"),n=`${e.location.street1},${e.location.city},${e.location.region},${e.location.postalCode}`;$(t).addClass("dashicons dashicons-location"),$(a).attr("href","https://www.google.com/maps/place/"+n),$(a).attr("target","_blank"),v.length&&$(a).css("color",v.val());return $(a).html(n),$(a).prepend(t),a}(e)),$(b).append(M)}if(!w.length){var G=document.createElement("DIV");$(G).addClass("opp-match-description"),$(G).append(function(e){var t=document.createElement("DIV"),a=document.createElement("A"),n=document.createElement("SPAN"),r=document.createElement("DIV");return $(r).attr("id","#opp-description-"+e.id),$(r).addClass("collapse"),$(r).html(e.description),$(r).collapse({toggle:!1}),$(a).addClass("text-reset"),$(a).attr("data-toggle","collapse"),$(a).attr("href","#opp-description-"+e.id),$(a).attr("aria-expanded","false"),$(a).attr("aria-controls","opp-description-"+e.id),$(a).html("Description"),$(n).addClass("dashicons dashicons-arrow-down-alt2 dashicons-arrow-up-alt2 align-middle"),$(a).append(n),$(t).append(a),$(t).append(r),a.addEventListener("click",(function(e){$(r).collapse("toggle"),$(n).toggleClass("dashicons-arrow-up-alt2")})),t}(e)),$(b).append(G)}$(h).append(b),$(h).append(P),$(m).append(h),N.append(m)}(e)}));else if(e.error){var h=void 0!==conn.response?" Error Message: "+conn.response:"";N.html(h)}else N.html("<span>No Opportunities Available.</span>")}else N.html("<span>An error occurred while retrieving opportunities.</span>")}})}else $("div#volunteer-match form input:invalid").parent().addClass("was-validated")}x.keypress((function(e){if(I.find(".was-validated").removeClass("was-validated"),8!=e.which&&0!=e.which&&(e.which<48||e.which>57))return!1})),R.click((function(e){U(e,void 0)}))}}));